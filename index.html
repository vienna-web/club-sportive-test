<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
<title>Este Essaouira Sports Club</title>

<style>
/* =========================
   ROOT VARIABLES & COLORS
   ========================= */
:root {
  --blue:#0b63a7;
  --orange:#ff7a2d;
  --dark-blue:#062036;
  --bg:#ffffff;
  --text:#062036;
  --card-bg:#f3f3f3;
  --card-shadow:0 6px 18px rgba(11,99,167,0.12);
  --card-shadow-hover:0 12px 28px rgba(11,99,167,0.18);
  font-family:'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif;
}

/* Dark mode */
@media (prefers-color-scheme: dark) {
  :root {
    --bg:#0d0d0d;
    --text:#f1f1f1;
    --card-bg:#1c1c1c;
  }
}

/* =========================
   BODY
   ========================= */
body {
  margin:0;
  padding:0;
  background: var(--bg);
  color: var(--text);
  transition: background 0.3s, color 0.3s;
  text-align:center;
  font-size:16px;
  overflow-x: hidden;
  touch-action: manipulation;
}

/* Disable zoom gestures */
* {
  touch-action: pan-x pan-y;
}

/* Hide scrollbars */
::-webkit-scrollbar {
  display: none;
}

html {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

/* =========================
   TOP LOGOS SECTION
   ========================= */
.top-logos-container {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 20px 40px;
  background: linear-gradient(135deg, rgba(11,99,167,0.05), rgba(255,122,45,0.05));
  gap: 20px;
  flex-wrap: wrap;
}

.top-logo1, .top-logo2 {
  flex: 1;
  min-width: 100px;
  max-width: 100px;
}

.top-logo1 {
  max-width: 200px;
}

.top-logo1 img, .top-logo2 img {
  width: 100%;
  height: auto;
  max-width: 100px;
  object-fit: contain;
  transition: transform 0.15s ease;
}

.top-logo1 img {
  max-width: 190px;
}

.top-logo1:hover img, .top-logo2:hover img {
  transform: scale(1.05);
}

/* =========================
   HERO SECTION
   ========================= */
.hero {
  height:380px;
  position:relative;
  overflow:hidden;
  display:flex;
  align-items:center;
  justify-content:center;
  color:#fff;
  background-size:cover;
  background-position:center;
  margin-bottom:30px;
  border-radius:0;
}

.hero.bg-local {
  background-image:url('este.jpg');
}

.hero .overlay {
  position:absolute;
  inset:0;
  background:linear-gradient(135deg, rgba(11,99,167,0.7), rgba(255,122,45,0.5));
}

.hero-content {
  position:relative;
  z-index:2;
  text-align:center;
}

.hero h1 {
  font-size:44px;
  margin:0 0 8px 0;
  text-align:center;
  text-transform:uppercase;
  letter-spacing:2px;
  font-weight:700;
  text-shadow:2px 2px 8px rgba(0,0,0,0.4);
}

.hero p {
  font-size:15px;
  margin:0;
  color:rgba(255,255,255,0.95);
  text-shadow:1px 1px 4px rgba(0,0,0,0.3);
}

/* =========================
   SECTION HEADINGS
   ========================= */
h2 {
  font-size:30px;
  color:var(--blue);
  margin:24px 0 16px 0;
  text-align:left;
  font-weight:700;
  border-bottom:3px solid var(--orange);
  padding-bottom:10px;
  max-width: 1200px;
  margin-left: auto;
  margin-right: auto;
  padding-left: 20px;
  padding-right: 20px;
}

h3 {
  margin-top:16px;
  margin-bottom: 12px;
  color:var(--blue);
  font-size:22px;
  font-weight:600;
  max-width: 1200px;
  margin-left: auto;
  margin-right: auto;
  text-align: left;
  padding-left: 20px;
  padding-right: 20px;
}

p {
  color:#375b7a;
  line-height:1.6;
}

/* =========================
   EVENTS SLIDER
   ========================= */
#event-slider {
  position: relative;
  overflow: hidden;
  margin-top: 6px;
  max-width: 1200px;
  margin-left: auto;
  margin-right: auto;
  padding: 0 20px;
  padding-bottom: 16px;
}

#event-track {
  display: flex;
  gap: 0;
  transition: transform 0.4s ease;
  padding: 0;
  scroll-snap-type: x mandatory;
}

.event-card {
  min-width: calc(100% - 14px);
  flex-direction: column;
  align-items: flex-start;
  background: var(--card-bg);
  border-radius: 8px;
  box-shadow: var(--card-shadow);
  padding: 10px;
  position: relative;
  overflow: hidden;
  scroll-snap-align: start;
  scroll-snap-stop: always;
}

.event-card img {
  width: 100%;
  height: 200px;
  object-fit: cover;
  object-position: center center;
  border-radius: 6px;
  margin-bottom: 6px;
  display: block;
}

@media (max-width: 600px) {
  .event-card img {
    height: 180px;
    object-fit: cover;
  }
}

.event-card h4 {
  font-size: 15px;
  margin: 3px 0;
  color: var(--blue);
}

.event-card p {
  font-size: 12px;
  margin: 2px 0;
  color: #375b7a;
}

.event-card button, .event-card a {
  margin-top: 4px;
  margin-right: 4px;
  border: none;
  border-radius: 4px;
  padding: 6px 10px;
  cursor: pointer;
  font-weight: 600;
  text-decoration: none;
  display: inline-block;
  transition: opacity 0.15s ease;
  font-size: 12px;
}

.event-card button {
  background: var(--blue);
  color: #fff;
}

.event-card button:hover {
  opacity: 0.9;
}

.event-card a {
  background: var(--orange);
  color: #fff;
}

.event-card a:hover {
  opacity: 0.9;
}

.event-card .status {
  position: absolute;
  top: 8px;
  right: 8px;
  padding: 3px 6px;
  border-radius: 4px;
  font-weight: 600;
  font-size: 10px;
  color: white;
  background: var(--orange);
  text-transform: uppercase;
}

/* =========================
   AI WEBSITE LINK SECTION
   ========================= */
.ai-site-section {
  padding: 40px 20px;
  display: flex;
  justify-content: center;
  background: linear-gradient(
    120deg,
    rgba(11,99,167,0.08),
    rgba(255,122,45,0.08)
  );
  margin-top: 30px;
}

.ai-site-box {
  padding: 30px 24px;
  max-width: 650px;
  width: 100%;
  text-align: center;
  background-image: url('analy.jpg');
  background-size: cover;
  background-position: center;
  background-attachment: scroll;
  position: relative;
  border-radius: 8px;
  overflow: hidden;
}

.ai-site-box::before {
  content: '';
  position: absolute;
  inset: 0;
  background: rgba(0, 0, 0, 0.75);
  z-index: 1;
}

.ai-site-box > * {
  position: relative;
  z-index: 2;
  color: white;
}

.ai-site-box h2 {
  color: white;
  margin-bottom: 8px;
  border-bottom: none;
  padding-bottom: 0;
}

.ai-site-box p {
  color: white;
  font-size: 14px;
  margin-bottom: 20px;
  line-height: 1.5;
}

.ai-site-logos {
  display: flex;
  justify-content: center;
  gap: 24px;
  margin-bottom: 16px;
  flex-wrap: wrap;
}

.ai-site-logos img {
  width: 80px;
  height: 80px;
  object-fit: contain;
}

.ai-site-box h2 {
  color: var(--blue);
  margin-bottom: 8px;
  border-bottom: none;
  padding-bottom: 0;
}

.ai-site-box p {
  color: #375b7a;
  font-size: 14px;
  margin-bottom: 20px;
  line-height: 1.5;
}

.ai-site-btn {
  display: inline-block;
  background: var(--orange);
  color: white;
  padding: 10px 24px;
  border-radius: 6px;
  text-decoration: none;
  font-weight: 600;
  transition: opacity 0.15s ease;
}

/* =========================
   MODAL
   ========================= */
.modal {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.55);
  align-items: center;
  justify-content: center;
  z-index: 9999;
}

.modal-content {
  background: var(--card-bg);
  padding: 20px;
  border-radius: 8px;
  max-width: 380px;
  position: relative;
  box-shadow: 0 10px 40px rgba(0,0,0,0.25);
}

/* =========================
   RESERVATION
   ========================= */
.reserve {
  padding: 16px;
  border-radius: 8px;
  background: linear-gradient(180deg, #ffffff, #f7fbff);
  border: 1px solid #e6f0fb;
  margin-top: 8px;
  max-width: 1200px;
  margin-left: auto;
  margin-right: auto;
}

.reserve p {
  text-align: left;
  margin: 0 0 10px 0;
  padding: 0 16px;
  font-size: 13px;
}

.reserve iframe {
  width: 100%;
  height: 600px;
  border: 0;
  border-radius: 6px;
  filter: brightness(0.97);
}

.reserve-status {
  display: grid;
  gap: 10px;
  margin-top: 12px;
  max-width: 1200px;
  margin-left: auto;
  margin-right: auto;
  padding: 0 20px;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
}

/* =========================
   STATUS CARDS
   ========================= */
.status-card {
  background: var(--card-bg);
  border-radius: 8px;
  padding: 12px;
  box-shadow: var(--card-shadow);
  text-align: left;
  transition: box-shadow 0.15s ease;
  border-left: 3px solid var(--orange);
}

.status-card:hover {
  box-shadow: var(--card-shadow-hover);
}

.status-card h4 {
  margin: 0 0 6px 0;
  color: var(--blue);
  font-size: 14px;
}

.status-card p {
  margin: 2px 0;
  color: #375b7a;
  font-size: 12px;
}

.status-card strong {
  color: var(--blue);
  font-weight: 600;
}


/* =========================
   RESPONSIVE
   ========================= */
@media(max-width:900px) {
  .grid.cols-3 {
    grid-template-columns: repeat(2,1fr);
  }
  h2, h3 {
    font-size: 24px;
  }
  .top-logos-container {
    padding: 15px 20px;
    gap: 15px;
  }
}

@media(max-width:600px) {
  .grid.cols-3 {
    grid-template-columns: 1fr;
  }
  .hero {
    height: 320px;
  }
  .hero h1 {
    font-size: 36px;
    letter-spacing: 1px;
  }
  .hero p {
    font-size: 16px;
  }
  .top-logos-container {
    padding: 12px 16px;
  }
  .top-logo1 {
    max-width: 170px;
  }
  .top-logo1 img {
    max-width: 160px;
  }
  .top-logo2 {
    max-width: 100px;
  }
  .event-card {
    min-width: 100%;
  }
  .reserve iframe {
    height: 350px;
  }
  #event-slider {
    padding: 0 10px;
  }
  .reserve-status {
    grid-template-columns: 1fr;
  }
  .ai-site-box {
    padding: 32px 20px;
  }
  .ai-site-logos {
    gap: 20px;
  }
  .ai-site-logos img {
    width: 80px;
    height: 80px;
  }
}

@media(max-width:768px) {
  .member-card {
    flex-direction: column;
    text-align: center;
  }
  .slider-btn {
    display: none;
  }
}

/* =========================
   FOOTER
========================= */
.site-footer {
  background: linear-gradient(135deg, rgba(11,99,167,0.6), rgba(255,122,45,0.3));
  color: #ffffff;
  padding: 24px 16px;
  font-size: 12px;
  text-align: center;
  line-height: 1.5;
  box-shadow: inset 0 2px 0 rgba(255,255,255,0.1);
  margin-top: 30px;
}

.site-footer .footer-content {
  max-width: 900px;
  margin: 0 auto;
}

.site-footer p {
  margin: 6px 0;
  color: rgba(255,255,255,0.95);
}

.site-footer a {
  color: #ffffff;
  text-decoration: none;
  font-weight: 500;
  margin: 0 3px;
  transition: opacity 0.15s ease;
}

.site-footer a:hover {
  opacity: 0.8;
}

@media(max-width:600px) {
  .site-footer {
    font-size: 11px;
    padding: 18px 12px;
  }
  .site-footer p {
    margin: 4px 0;
  }
  .hero {
    height: 280px;
  }
  .hero h1 {
    font-size: 32px;
  }
  .hero p {
    font-size: 13px;
  }
  .event-card {
    min-width: 100%;
  }
  .reserve iframe {
    height: 240px;
  }
  .reserve-status {
    grid-template-columns: 1fr;
  }
}

/* =========================
   STUDENT REGISTRATION FORM
   ========================= */

.student-form-container {
  max-width: 520px;
  margin: 40px auto;
  padding: 20px;
  background: var(--card-bg);
  border-radius: 10px;
  box-shadow: var(--card-shadow);
  text-align: center;
  transition: box-shadow 0.2s ease;
}

.student-form-container:hover {
  box-shadow: var(--card-shadow-hover);
}

.student-form-container h2 {
  text-align: center;
  margin-bottom: 18px;
}

#studentForm {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

#studentForm input {
  width: 95%;
  padding: 12px 14px;
  border-radius: 6px;
  border: 1px solid rgba(11,99,167,0.25);
  font-size: 15px;
  background: var(--bg);
  color: var(--text);
  transition: border 0.2s ease, box-shadow 0.2s ease;
}

#studentForm input::placeholder {
  color: #7a8fa3;
}

#studentForm input:focus {
  outline: none;
  border-color: var(--blue);
  box-shadow: 0 0 0 2px rgba(11,99,167,0.15);
}

#studentForm button {
  margin-top: 10px;
  padding: 12px;
  border-radius: 6px;
  border: none;
  background: linear-gradient(135deg, var(--blue), var(--orange));
  color: white;
  font-size: 15px;
  font-weight: 600;
  cursor: pointer;
  transition: transform 0.12s ease, box-shadow 0.12s ease, opacity 0.12s ease;
}

#studentForm button:hover {
  transform: translateY(-1px);
  box-shadow: 0 6px 18px rgba(11,99,167,0.25);
  opacity: 0.95;
}

#successMessage {
  display: none;
  margin-top: 14px;
  padding: 8px 12px;
  background: rgba(40, 167, 69, 0.12);
  color: #28a745;
  border-radius: 6px;
  font-size: 14px;
  font-weight: 600;
}

/* Dark mode optimization */
@media (prefers-color-scheme: dark) {
  #studentForm input {
    background: #141414;
    border-color: rgba(255,255,255,0.15);
    color: #f1f1f1;
  }

  #successMessage {
    background: rgba(40, 167, 69, 0.2);
  }
}

/* Mobile adjustments */
@media (max-width: 600px) {
  .student-form-container {
    margin: 30px 12px;
    padding: 16px;
  }

  #studentForm input {
    font-size: 14px;
  }

  #studentForm button {
    font-size: 14px;
  }
}

</style>
</head>
<body>

<!-- =========================
     TOP LOGOS (SCHOOL + CLUB)
     ========================= -->
<div class="top-logos-container">
  <div class="top-logo1">
    <img src="est.png.png" alt="School Logo" />
  </div>
  <div class="top-logo2"> 
    <img src="club.png" alt="Club Logo" />
  </div>
</div>

<main>

<!-- =========================
     HERO SECTION
     ========================= -->
<div class="hero bg-local">
  <div class="overlay"></div>
  <h1>club sportif este</h1>
</div>

<!-- =========================
     EVENTS
     ========================= -->
<h3>√âv√©nements √† venir</h3>
<div id="event-slider">
  <div id="event-track">
    <!-- Event Card 1 -->
    <div class="event-card" data-date="2025-05-22">
      <img src="event1.jpeg" alt="Event 1" />
      <h4>RUNNING DAY</h4>
      <p><strong>Date :</strong> 22 Nov 2025</p>
      <p><strong>Heure :</strong> 09:00</p>
      <p><strong>Lieu :</strong>plage Essaouira</p>
      <button class="open-modal" data-target="modal1">D√©tails</button>
      <a href="https://forms.gle/wHzMe1bGsWJEztdY9" target="_blank">S'inscrire</a>
    </div>

    <!-- Event Card 2 -->
    <div class="event-card" data-date="2025-12-02">
      <img src="tourn.jpg" alt="Event 2" />
      <h4>tournement Basketball</h4>
      <p><strong>Date :</strong> 02 dec 2025</p>
      <p><strong>Heure :</strong> 18:30</p>
      <p><strong>Lieu :</strong> Terrain de Basketball</p>
      <button class="open-modal" data-target="modal2">D√©tails</button>
      <a href="https://docs.google.com/forms/d/YOUR_FORM_ID/viewform" target="_blank">S'inscrire</a>
    </div>

    <!-- Event Card 3 -->
    <div class="event-card" data-date="2026-12-24">
      <img src="surf.avif" alt="Event 3" />
      <h4>surf</h4>
      <p><strong>Date :</strong> 24 dec 2025</p>
      <p><strong>Heure :</strong> 09:00</p>
      <p><strong>Lieu :</strong>plage Essaouira</p>
      <button class="open-modal" data-target="modal3">D√©tails</button>
      <a href="https://docs.google.com/forms/d/YOUR_FORM_ID/viewform" target="_blank">S'inscrire</a>
    </div>

    <!-- Event Card 4 -->
    <div class="event-card" data-date="2026-05-15">
      <img src="images/event4.jpg" alt="Event 4" />
      <h4>pas d'√©v√©nement</h4>
      <p><strong>Date :</strong> 15 Mai 2025</p>
      <p><strong>Heure :</strong> 18:00</p>
      <p><strong>Lieu :</strong> Terrain de Volleyball</p>
      <button class="open-modal" data-target="modal4">D√©tails</button>
      <a href="https://docs.google.com/forms/d/YOUR_FORM_ID/viewform" target="_blank">S'inscrire</a>
    </div>

    <!-- Add more cards here -->
  </div>
<div id="modal1" class="modal">
  <div class="modal-content">
    <h3>RUNNING day ‚Äî D√©tails</h3>
    <p>üåüAre you ready for a day full of energy, fun, and good vibes?
This Saturday 22, we‚Äôre meeting at Barakat Mohammed and heading straight to Essaouira Beach for the ultimate { RUNNING DAY! }

‚ú® Expect:
‚Ä¢ Beach run
‚Ä¢ Fun surprise
‚Ä¢ Great people
‚Ä¢ A perfect chance to enjoy, laugh, and make new memories

Whether you‚Äôre coming with friends or solo ‚Äî you‚Äôre guaranteed to have an amazing time.
Don‚Äôt miss it‚Ä¶ This is YOUR day!üèÖ.</p>
    <button class="close-modal">Fermer</button>
  </div>
</div>

<div id="modal2" class="modal">
  <div class="modal-content">
    <h3>tournament basketball  ‚Äî D√©tails</h3>
    <p>üì£ 3V3 Basketball Tournament ‚Äì EST Essaouira
Get ready! Our basketball tournament is happening on December 1st, and it‚Äôs open to boys & girls.
The participation fee is only 15 DH per player.

üî• Bring your energy, build your team‚Ä¶ It‚Äôs show time!.</p>
    <button class="close-modal">Fermer</button>
  </div>
</div>

<div id="modal3" class="modal">
  <div class="modal-content">
    <h3>pas d'√©v√©nement ‚Äî D√©tails</h3>
    <p>La description de l'√©v√©nement 3 sera ici.</p>
    <button class="close-modal">Fermer</button>
  </div>
</div>

  </div>
<div id="modal4" class="modal">
  <div class="modal-content">
    <h3>pas d'√©v√©nements ‚Äî D√©tails</h3>
    <p>La description de l'√©v√©nement 4 sera ici.</p>
    <button class="close-modal">Fermer</button>
  </div>
</div>




</div>

<!-- =========================
     AI FITNESS WEBSITE LINK
     ========================= -->
<section class="ai-site-section">
  <div class="ai-site-box">

    <div class="ai-site-logos">
      <img src="est.png.png" alt="School Logo">
      <img src="club.png" alt="Club Logo">
    </div>

    <h2>Analyseur de Fitness et Performance</h2>
    <p>
      Analysez votre condition physique, votre masse musculaire et vos performances
      sportives gr√¢ce √† notre nouvelle plateforme intelligente.
    </p>

    <a href=" https://vienna-web.github.io/health/" class="ai-site-btn" target="_blank">
      Analysez votre performance ‚Üí
    </a>

  </div>
</section>

<!-- =========================
     RESERVATIONS
     ========================= -->

     
<h3>reservation terrain de foot ‚öΩ</h3>
<div class="reserve">
  <p>Pour r√©server le terrain de football, veuillez remplir le formulaire ci-dessous.</p>
  <iframe src="https://calendar.app.google/hKMrFjJmRrgZRji56"></iframe>
</div>

<h3>Statut des R√©servations</h3>
<div class="reserve-status">
  <div class="status-card">
    <h4>Terrain de Football ‚öΩ</h4>
    <p>Statut : <strong>Disponible</strong></p>
  </div>

  <div class="status-card">
    <h4>Terrain de Basketball üèÄ</h4>
    <p>Statut : <strong>Non disponible</strong></p>
    <p>Disponibilit√© pr√©vue : √Ä d√©terminer</p>
  </div>

  <div class="status-card">
    <h4>Terrain de Volleyball üèê</h4>
    <p>Statut : <strong>Non disponible</strong></p>
    <p>Disponibilit√© pr√©vue : √Ä d√©terminer</p>
  </div>
</div>

<!-- =========================
     FOOTER
     ========================= -->
<div id="modal1" class="modal">
  <div class="modal-content">
    <h3>√âv√©nement 1 ‚Äî D√©tails</h3>
    <p>Plus de d√©tails sur l'√âv√©nement 1 ici.</p>
    <button class="close-modal">Fermer</button>
  </div>
</div>
</main>

<div class="student-form-container">
  <h2>vorte activit√© de loisir </h2>

  <form
    id="studentForm"
    action="https://docs.google.com/forms/d/e/1FAIpQLScZI6DSYPYKR8F9ZhJp780vK6P1gpimjtd4LZiL73lcO5UWng/formResponse"
    method="POST"
    target="hiddenFrame"
    onsubmit="showSuccess()"
  >
    <input type="text" name="entry.1774429289" placeholder="nom et prenom" required>
    <input type="text" name="entry.1741621165" placeholder="filliere" required>
    <input type="text" name="entry.1424181995" placeholder="Sport de loisir" required>

    <button type="submit">soumettre</button>
  </form>

  <p id="successMessage">‚úÖ Submitted successfully!</p>

  <iframe name="hiddenFrame" style="display:none;"></iframe>
</div>

<!-- =========================
     FOOTER
========================= -->
<footer class="site-footer">
  <div class="footer-content">
    <p>&copy; 2025 Este Essaouira Sports Club. Tous droits r√©serv√©s.</p>
    <p>
      Contact : 
      <a href="mailto:info@esteclub.com">info@esteclub.com</a> | 
      <a href="https://instagram.com/club_sportifeste" target="_blank">Instagram</a> | 
      <a href="https://wa.me/212781467073">whatsapp</a>
    </p>
    <p>Suivez-nous pour rester inform√© de nos activit√©s et √©v√©nements sportifs !</p>
  </div>
</footer>


<script>
/* =========================
   DISABLE ZOOM
   ========================= */
// Prevent pinch zoom on mobile
document.addEventListener('touchmove', (e) => {
  if (e.touches.length > 1) {
    e.preventDefault();
  }
}, { passive: false });

// Prevent double-tap zoom
let lastTouchEnd = 0;
document.addEventListener('touchend', (e) => {
  const now = Date.now();
  if (now - lastTouchEnd <= 300) {
    e.preventDefault();
  }
  lastTouchEnd = now;
}, false);

// Prevent keyboard zoom (Ctrl/Cmd + +/-)
document.addEventListener('keydown', (e) => {
  if ((e.ctrlKey || e.metaKey) && (e.key === '+' || e.key === '-' || e.key === '0')) {
    e.preventDefault();
  }
});

/* =========================
   ENHANCED SLIDER JS
   ========================= */
const track = document.getElementById('event-track');
const slider = document.getElementById('event-slider');

let isDragging = false;
let startX = 0;
let currentX = 0;
let velocity = 0;
let lastX = 0;
let lastTime = 0;

function dragStart(e) {
  isDragging = true;
  const xPos = e.type.includes('mouse') ? e.pageX : e.touches[0].pageX;
  startX = xPos - currentX;
  lastX = xPos;
  lastTime = Date.now();
  track.style.transition = 'none';
}

function dragMove(e) {
  if (!isDragging) return;
  
  const xPos = e.type.includes('mouse') ? e.pageX : e.touches[0].pageX;
  currentX = xPos - startX;
  
  const maxScroll = track.scrollWidth - slider.offsetWidth;
  currentX = Math.min(0, Math.max(currentX, -maxScroll));
  
  const now = Date.now();
  const dt = Math.max(16, now - lastTime);
  velocity = (xPos - lastX) / dt;
  
  lastX = xPos;
  lastTime = now;
  
  track.style.transform = `translateX(${currentX}px)`;
}

function dragEnd() {
  if (!isDragging) return;
  isDragging = false;
  
  track.style.transition = 'transform 0.4s ease';
  
  // Calculate snap position with lower drag threshold and velocity (flick) support
  const cardWidth = track.querySelector('.event-card').offsetWidth + 14;
  const maxScroll = track.scrollWidth - slider.offsetWidth;

  // Sensitivity: fraction of card width required to switch (lower = easier to switch)
  const sensitivity = 0.28; // ~28% of card width

  // Determine index based on position and quick swipe velocity
  const absPos = Math.abs(currentX);
  let index = Math.floor(absPos / cardWidth);

  // If dragged past sensitivity threshold, advance to next
  if ((absPos % cardWidth) / cardWidth > sensitivity) index = Math.ceil(absPos / cardWidth);

  // Use velocity for flick detection (quick swipes)
  if (Math.abs(velocity) > 0.25) {
    if (velocity < 0) { // swiped left quickly -> go next
      index = Math.ceil(absPos / cardWidth);
    } else { // swiped right quickly -> go previous
      index = Math.floor(absPos / cardWidth);
    }
  }

  const snapPosition = -Math.min(index * cardWidth, maxScroll);
  currentX = Math.max(-maxScroll, Math.min(snapPosition, 0));

  track.style.transform = `translateX(${currentX}px)`;
}

// Event listeners
track.addEventListener('mousedown', dragStart);
document.addEventListener('mousemove', dragMove);
document.addEventListener('mouseup', dragEnd);
track.addEventListener('mouseleave', dragEnd);

track.addEventListener('touchstart', dragStart);
document.addEventListener('touchmove', dragMove, { passive: true });
document.addEventListener('touchend', dragEnd);

// Prevent text selection during drag
track.addEventListener('selectstart', (e) => {
  if (isDragging) e.preventDefault();
});

/* =========================
   MODALS JS
   ========================= */
const modals = document.querySelectorAll('.modal');

document.querySelectorAll('.open-modal').forEach(btn => {
  btn.addEventListener('click', (e) => {
    e.preventDefault();
    const targetId = btn.dataset.target;
    const modal = document.getElementById(targetId);
    if (modal) {
      modal.style.display = 'flex';
      document.body.style.overflow = 'hidden';
    }
  });
});

document.querySelectorAll('.close-modal').forEach(btn => {
  btn.addEventListener('click', () => {
    btn.closest('.modal').style.display = 'none';
    document.body.style.overflow = '';
  });
});

document.addEventListener('keydown', (e) => {
  if (e.key === 'Escape') {
    modals.forEach(m => {
      m.style.display = 'none';
    });
    document.body.style.overflow = '';
  }
});

modals.forEach(m => {
  m.addEventListener('click', (e) => {
    if (e.target === m) {
      m.style.display = 'none';
      document.body.style.overflow = '';
    }
  });
});

/* =========================
   AUTOMATIC PAST EVENT MARKING
   ========================= */
function markPastEvents() {
  const today = new Date();
  document.querySelectorAll('.event-card').forEach(card => {
    const eventDate = new Date(card.dataset.date);
    eventDate.setDate(eventDate.getDate() + 1);
    
    if (today >= eventDate) {
      if (!card.querySelector('.status')) {
        const status = document.createElement('div');
        status.className = 'status';
        status.innerText = 'Ended';
        card.appendChild(status);
      }
    }
  });
}

markPastEvents();
setInterval(markPastEvents, 60 * 1000);

/* =========================
   SCROLL ANIMATIONS
   ========================= */
const observerOptions = {
  threshold: 0.1,
  rootMargin: '0px 0px -100px 0px'
};

const observer = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      entry.target.style.opacity = '1';
      entry.target.style.transform = 'translateY(0)';
    }
  });
}, observerOptions);

// Observe reservation sections
document.querySelectorAll('.reserve, .reserve-status').forEach(el => {
  el.style.opacity = '0';
  el.style.transform = 'translateY(20px)';
  el.style.transition = 'all 0.6s ease-out';
  observer.observe(el);
});


function showSuccess(){
  document.getElementById("successMessage").style.display = "block";
  document.getElementById("studentForm").reset();
}

</script>

</body>
</html>

